<h1 class="text-center">Esc치ner de C칩digos de Barra</h1>

<!-- Botones para controlar la c치mara -->
<div class="text-center mb-3">
    <button class="btn btn-primary" (click)="activarCamara()" *ngIf="!camaraActivada">Activar c치mara</button>
    <button class="btn btn-danger" (click)="camaraActivada = false" *ngIf="camaraActivada">Desactivar c치mara</button>
</div>

<!-- Vista de la c치mara -->
<div *ngIf="camaraActivada" class="text-center">
    <div style="overflow: hidden; width: 320px; height: 240px;" class="mx-auto">
        <zxing-scanner #scanner (scanSuccess)="onCodeResult($event)" [device]="currentDevice" [formats]="formatsEnabled"
            (camerasFound)="onCamerasFound($event)" (permissionResponse)="onHasPermission($event)"
            style="width: 100%; height: 100%; object-fit: cover;" [style.transform]="'scale(' + zoomValue + ')'">
        </zxing-scanner>
    </div>

    <p class="mt-2">El esc치ner est치 activo</p>

    <div class="mb-3">
        <label>Zoom:</label>
        <div class="btn-group" role="group" aria-label="Zoom options">
            <button class="btn btn-outline-secondary" (click)="setZoom(1)">1x</button>
            <button class="btn btn-outline-secondary" (click)="setZoom(2)">2x</button>
            <button class="btn btn-outline-secondary" (click)="setZoom(3)">3x</button>
        </div>
        <span class="ml-2">{{ zoomValue }}x</span>
    </div>
</div>

<!-- Bot칩n de linterna -->
<button class="btn btn-warning" (click)="toggleLinterna()" *ngIf="camaraActivada">
    {{ linternaActiva ? 'Apagar linterna 游댡' : 'Encender linterna 游댄' }}
</button>

<!-- Resultados escaneados -->
<div *ngIf="scannedResults.length > 0" class="bg-light p-3 mt-3">
    <h3>C칩digos escaneados:</h3>
    <ul class="list-group">
        <li class="list-group-item" *ngFor="let codigo of scannedResults">{{ codigo }}</li>
    </ul>
</div>

<!-- Secci칩n para escanear desde imagen -->
<h2>Escanear desde imagen</h2>
<input type="file" accept="image/*" (change)="cargarImagen($event)" class="form-control mb-2">
<button class="btn btn-info" (click)="escanearImagen()" [disabled]="!imagenSeleccionada">Escanear imagen</button>
<p>Resultado del escaneo: {{ scannedResult }}</p>